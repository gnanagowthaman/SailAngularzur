{"remainingRequest":"/home/vahai/Desktop/jun16/SailAngularzur/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/vahai/Desktop/jun16/SailAngularzur/node_modules/@progress/kendo-angular-grid/dist/es/scrolling/scroller.service.js","dependencies":[{"path":"/home/vahai/Desktop/jun16/SailAngularzur/node_modules/@progress/kendo-angular-grid/dist/es/scrolling/scroller.service.js","mtime":1529128667115},{"path":"/home/vahai/Desktop/jun16/SailAngularzur/node_modules/cache-loader/dist/cjs.js","mtime":1529128679567},{"path":"/home/vahai/Desktop/jun16/SailAngularzur/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n/**\n * @hidden\n */\nvar ScrollAction = /*@__PURE__*/ (function () {\n    function ScrollAction(offset) {\n        this.offset = offset;\n    }\n    return ScrollAction;\n}());\nexport { ScrollAction };\n/**\n * @hidden\n */\nvar PageAction = /*@__PURE__*/ (function () {\n    function PageAction(skip, take) {\n        this.skip = skip;\n        this.take = take;\n    }\n    return PageAction;\n}());\nexport { PageAction };\n/**\n * @hidden\n */\nvar ScrollerService = /*@__PURE__*/ (function () {\n    function ScrollerService(scrollObservable) {\n        this.scrollObservable = scrollObservable;\n        this.firstLoaded = 0;\n    }\n    ScrollerService.prototype.create = function (rowHeightService, skip, take, total) {\n        var _this = this;\n        this.rowHeightService = rowHeightService;\n        this.firstLoaded = skip;\n        this.lastLoaded = skip + take;\n        this.take = take;\n        this.total = total;\n        this.lastScrollTop = 0;\n        var subject = new BehaviorSubject(new ScrollAction(this.rowHeightService.offset(skip)));\n        this.subscription = Observable.create(function (observer) {\n            _this.unsubscribe();\n            _this.scrollSubscription = _this.scrollObservable.subscribe(function (x) { return _this.onScroll(x, observer); });\n        }).subscribe(function (x) { return subject.next(x); });\n        return subject;\n    };\n    ScrollerService.prototype.destroy = function () {\n        this.unsubscribe();\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    };\n    ScrollerService.prototype.onScroll = function (_a, observer) {\n        var scrollTop = _a.scrollTop, offsetHeight = _a.offsetHeight;\n        if (this.lastScrollTop === scrollTop) {\n            return;\n        }\n        var up = this.lastScrollTop >= scrollTop;\n        this.lastScrollTop = scrollTop;\n        var firstItemIndex = this.rowHeightService.index(scrollTop);\n        var firstItemOffset = this.rowHeightService.offset(firstItemIndex);\n        var lastItemIndex = this.rowHeightService.index(scrollTop + offsetHeight);\n        if (!up && lastItemIndex >= this.lastLoaded && this.lastLoaded < this.total) {\n            var overflow = (firstItemIndex + this.take) - this.total;\n            if (overflow > 0) {\n                firstItemIndex = firstItemIndex - overflow;\n                firstItemOffset = this.rowHeightService.offset(firstItemIndex);\n            }\n            this.firstLoaded = firstItemIndex;\n            observer.next(new ScrollAction(firstItemOffset));\n            var nextTake = this.firstLoaded + this.take;\n            this.lastLoaded = Math.min(nextTake, this.total);\n            nextTake = nextTake > this.total ? this.total - this.firstLoaded : this.take;\n            observer.next(new PageAction(this.firstLoaded, this.take));\n        }\n        if (up && firstItemIndex < this.firstLoaded) {\n            var nonVisibleBuffer = Math.floor(this.take * 0.3);\n            this.firstLoaded = Math.max(firstItemIndex - nonVisibleBuffer, 0);\n            observer.next(new ScrollAction(this.rowHeightService.offset(this.firstLoaded)));\n            this.lastLoaded = Math.min(this.firstLoaded + this.take, this.total);\n            observer.next(new PageAction(this.firstLoaded, this.take));\n        }\n    };\n    ScrollerService.prototype.unsubscribe = function () {\n        if (this.scrollSubscription) {\n            this.scrollSubscription.unsubscribe();\n            this.scrollSubscription = undefined;\n        }\n    };\n    return ScrollerService;\n}());\nexport { ScrollerService };\n",null]}